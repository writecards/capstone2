//author: shengli
// following https://www.youtube.com/watch?v=ZeVbsZQiHdU&list=PLnyhHTSmcsEncMbNDVre2nh3OLXSW9LH2&index=2&ab_channel=weidi

// description: 3d data viz 
// how to interact: click and drag around this 3d data viz



let string = "We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system.\
We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry. It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices. While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society. We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed. We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need. We understand the tremendous challenge represented by climate change and have fully supported the Paris Agreement since its inception. Our scientists are working to develop innovative solutions to help reduce emissions, with a focus on the highest emitting and most difficult to decarbonize sectors of the economy: commercial transportation, power generation and heavy industry.It is in these areas where we believe ExxonMobil can best contribute to the challenge of climate change. For example, through our new ExxonMobil Low Carbon\
Solutions business we are advancing plans for large-scale emission reductions with new carbon capture and storage opportunities around the world. We are also leveraging ExxonMobil’s significant experience in the production of hydrogen which, when coupled with carbon capture and storage, is likely to play a critical role in a lower-carbon energy system. We’re investing $3 billion on lower-emission energy solutions through 2025 on top of $10 billion we’ve spent over the past two decades. As we develop additional value-added opportunities, I expect these investments to grow. We believe a price on carbon emissions is essential to achieving net zero emissions. Carbon pricing would send a clear signal through the market, creating incentives to reduce emissions, fostering investment in R&D to advance solutions and providing consumers with transparency to make the best choices.\
While there is some resistance to a carbon tax, we are actively and publicly discussing other options, including lower-carbon fuels and other sector-based approaches that would place a uniform, predictable cost on carbon. Today, through government regulation and incentives, we are paying to reduce carbon throughout the economy. Unfortunately, most of us don’t know what it’s costing. We think it’s vitally important for the cost of reducing carbon to be more transparent to enable comparisons of the various options to help policy makers reduce emissions at the lowest overall cost to society.\
We are actively working to reduce our own emissions. Overall, we have reduced operated greenhouse gas emissions by 11 percent from 2016 to 2020, and we’ve laid out plans for significant further reductions by 2025. We are also working to find new and better ways to monitor and reduce methane emissions, including collaborations with universities, environmental groups and other industry partners. Through 2020, we reduced methane emissions nearly 34 percent across our U.S. unconventional operations, compared to 2016 when the Paris Agreement was signed.\
We have great respect for policy makers, elected officials and organizations across the political spectrum who are grappling to effectively address climate change, one of the greatest challenges of our time. ExxonMobil’s position is clear: we want to be part of the solution while responsibly providing affordable energy required to power the economy. We have the experience, capabilities, capacity and commitment to help meet this critical need."

let splitStringArr = string.split(' ');
console.log(splitStringArr.length); 


////////graph////

let table;

let myCanvas;

let year = []; 
let mean = [];
 let boxSize = 400;
let font1;

function preload(){
  table = loadTable("assets/monthly_csv.csv", "csv", "header")
  font1 = loadFont("assets/opensans.ttf")
}

function setup() {
  let canvasW = windowWidth;
  let canvasH = windowHeight;
  myCanvas = createCanvas(canvasW, canvasH, WEBGL);
  myCanvas.position(0, (windowHeight-canvasH)/2);
  textAlign(CENTER,CENTER);
   
  //setting up camera uncomment line below 
  createEasyCam();
  document.oncontextmenu = ()=> false;
  
  //get basic info of data
  numRows = table.getRowCount();
  numCols = table.getColumnCount();
  //console.log(numRows,numCols);
  
  
  //getMinMax();
  //loading data
  
  for(let i = 0; i < table.getRowCount(); i++){
      year[i] = table.getNum(i,1);
      mean[i] = table.getNum(i,2);
      }
 
  
  cursor(HAND);
  textFont(font1);

}


//max value 1.35, min value -0.78

function draw() {
  background(255);
  noFill();
  noStroke();
  // box(boxSize);
  
  push();
  translate(-width/2, -height/2, -boxSize/2);
  mainGraph();
  pop();

  if(mouseIsPressed === true){
    cursor('grab');
  }else{
    cursor(HAND);
  }
}

let nextX, nextY, nextZ;

function mainGraph(){

  let numRowsGraph = numRows/12; //adjusting for months
 
  
  let gapX = boxSize / (year[0] - year[numRows - 1]);
  let gapZ = boxSize / 11;
  for(let i = 0; i < table.getRowCount(); i++){
    let x = width/2-boxSize/2 + gapX*abs((i)/12/2); //not quite sure why divide by 2 works but it fixes width
    let y = map(mean[i], -0.78, 1.35, height/2+boxSize/2, height/2-boxSize/2);
    let z = gapZ*(i%12);
  //datapoints
 
    stroke(255,0,0);
    point(x,y,z);
    
    //words
    push();
    translate(0, 0, z);
    textSize(random(7,8));
    textAlign(CENTER);
    fill(255,0,0)
    text(splitStringArr[i], x, y+3)
    pop();
    
    
    //connecting the points
    
    if(i < numRows-1){
      nextX = width/2-boxSize/2 + gapX*abs((i+1)/12/2);
      nextY = map(mean[i+1], -0.78, 1.35, height/2+boxSize/2, height/2-boxSize/2);
      nextZ = gapZ*((i+1)%12);
    }
    strokeWeight(0.5);
    stroke(0,0,255)
    beginShape();
    if(i%12 !=11){
      vertex(x,y,z);
      vertex(nextX, nextY, nextZ);
    }
    endShape();
   
  }
  
 
}



// let dataMin, dataMax = 0;

// function getMinMax(){
//   for(let i = 0; i < numRows; i++){
//     if(table.getNum(i,2)>dataMax){
//       dataMax = table.getNum(i,2);
//     }
//   }
//   dataMin = dataMax;
//   for(let i = 0; i < numRows; i ++){
//     if(table.getNum(i,2)<dataMin){
//       dataMin = table.getNum(i,2);
//     }
//   }
//   print("max value " + dataMax + ", min value " + dataMin)
// }



